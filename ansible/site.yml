---
- name: Configure production web servers
  hosts: webservers
  user: root
  environment:  # needed for making ./manage.py workable, normally hidden in Apache config
    DJANGO_CONFIGURATION: Production
    FUZZED_SECRET_KEY: 4711

  roles:
    - common
    - web
    - install_frontend

- name: Configure production backend servers
  hosts: backendservers
  user: root

  roles:
    - common
    - backend
    - install_backend

- name: Configure developer machine
  hosts: devmachine
  user: root

  roles:
    - common
    - build
    - web
    - backend
    - testing
    - { role: install_vagrant, when: vagrant == true }   # activated by Vagrant config file
